実行
====

ここでは，予め用意している `launchファイル <http://wiki.ros.org/roslaunch>`_ を使って"Gen2"モデルをROSのPub/Sub機能を用いて動かします。

起動
----

下記のコマンドでサンプルを起動することができます。

関節位置制御（Joint Position Control）の場合 ::

 roslaunch choreonoid_ros_gen2 gen2_joint.launch

デカルト位置制御（Cartesian Position Control）の場合 ::

 roslaunch choreonoid_ros_gen2 gen2_cartesian.launch

サンプルを起動すると、下図の仮想ジョイスティックノードが同時に起動します。起動時すると、下図の操作画面が表示されます。
 
 .. image:: images/joystick_0.png

関節位置制御によるGen2の操作
----------------------------

gen2_joint.launchを起動して、関節位置制御でGen2を操作する場合は、画面左の「Angular」ボタンをクリックします。ボタンをクリックすると、下図の画面が表示されます。

 .. image:: images/joystick_0.png

画面内の項目は以下のようになっています。

 * Angular control: 「＋」または「−」のボタンをクリックすることで、Gen2の各関節を動かすことができます。
 * Angular velocity: Gen2の各関節の角速度を指定できます。
 * Gripper: グリッパを開閉する信号を送信します。
 
.. note:: Gripperの項目は、実機のGen2を操作するためのものです。そのため、シミュレーション中にボタンをクリックすると、実機からの応答待ち状態となり、画面が操作できなくなりますのでご注意ください。

デカルト位置制御によるGen2の操作
--------------------------------

gen2_cartesian.launchを起動して、デカルト位置制御でGen2を操作する場合は、画面左の「Cartesian」ボタンをクリックします。ボタンをクリックすると、下図の画面が表示されます。

 .. image:: images/joystick_1.png

画面内の項目は以下のようになっています。 

 * Translation: ボタンをクリックすることで、Gen2の手先をデカルト座標系のX、Y、Z軸に沿って動かすことができます。
 * Orientation: ボタンをクリックすることで、Gen2の手先をGen2の手先のローカル座標を基準にして回転させることができます。
 * Cartesian velocity: Gen2の手先の並進速度、角速度を指定できます。
 * Gripper: グリッパを開閉する信号を送信します。
 
操作を始める際は、Cartesian velocityに任意の速度に設定してください。（安全のために初期値が0に設定されています。)

.. note:: Cartesian velocityの項目内の「Home」ボタンは、実機のGen2を操作するためのものです。そのため、シミュレーション中にボタンをクリックすると、実機からの応答待ち状態となり、画面が操作できなくなりますのでご注意ください。

.. note:: Gripperの項目は、実機のGen2を操作するためのものです。そのため、シミュレーション中にボタンをクリックすると、実機からの応答待ち状態となり、画面が操作できなくなりますのでご注意ください。
 
また、デカルト位置制御でGen2を操作する場合は、ジョイスティックを利用することもできます。ジョイスティックを利用する場合は、画面左の「Joystick」ボタンをクリックします。ボタンをクリックすると、下図の画面が表示されます。

 .. image:: images/joystick_2.png
 
画面内の項目は以下のようになっています。

 * Translation: Gen2の手先をデカルト座標系のX、Y、Z軸に沿って動かすことができます。
 * Orientation: Gen2の手先をGen2の手先のローカル座標を基準にして回転させることができます。
 * Cartesian velocity: Gen2の手先の並進速度、角速度を指定できます。
 * Gripper: グリッパを開閉する信号を送信します。
 
操作を始める際は、Cartesian velocityに任意の速度に設定してください。（安全のために初期値が0に設定されています。)

.. note:: Cartesian velocityの項目内の「Home」ボタンは、実機のGen2を操作するためのものです。そのため、シミュレーション中にボタンをクリックすると、実機からの応答待ち状態となり、画面が操作できなくなりますのでご注意ください。

.. note:: Gripperの項目は、実機のGen2を操作するためのものです。そのため、シミュレーション中にボタンをクリックすると、実機からの応答待ち状態となり、画面が操作できなくなりますのでご注意ください。

